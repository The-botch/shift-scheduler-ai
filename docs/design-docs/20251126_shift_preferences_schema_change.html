<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚·ãƒ•ãƒˆé–¢é€£ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ å¤‰æ›´ è¨­è¨ˆæ›¸</title>
    <style>
        body {
            font-family: 'Hiragino Sans', 'Meiryo', sans-serif;
            line-height: 1.8;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #1a365d;
            border-bottom: 3px solid #3182ce;
            padding-bottom: 10px;
        }
        h2 {
            color: #2c5282;
            border-left: 4px solid #3182ce;
            padding-left: 12px;
            margin-top: 40px;
        }
        h3 {
            color: #2d3748;
            margin-top: 30px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #e2e8f0;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #edf2f7;
            font-weight: bold;
        }
        tr:nth-child(even) {
            background-color: #f7fafc;
        }
        .warning {
            background-color: #fef3c7;
            border: 1px solid #f59e0b;
            padding: 15px;
            border-radius: 6px;
            margin: 20px 0;
        }
        .info {
            background-color: #dbeafe;
            border: 1px solid #3b82f6;
            padding: 15px;
            border-radius: 6px;
            margin: 20px 0;
        }
        .success {
            background-color: #d1fae5;
            border: 1px solid #10b981;
            padding: 15px;
            border-radius: 6px;
            margin: 20px 0;
        }
        .danger {
            background-color: #fee2e2;
            border: 1px solid #ef4444;
            padding: 15px;
            border-radius: 6px;
            margin: 20px 0;
        }
        code {
            background-color: #edf2f7;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
        }
        pre {
            background-color: #1a202c;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 6px;
            overflow-x: auto;
        }
        .file-path {
            color: #3182ce;
            font-weight: bold;
        }
        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }
        .badge-change {
            background-color: #fef3c7;
            color: #92400e;
        }
        .badge-add {
            background-color: #d1fae5;
            color: #065f46;
        }
        .badge-delete {
            background-color: #fee2e2;
            color: #991b1b;
        }
        .badge-backend {
            background-color: #dbeafe;
            color: #1e40af;
        }
        .badge-frontend {
            background-color: #fae8ff;
            color: #86198f;
        }
        .badge-db {
            background-color: #fef9c3;
            color: #854d0e;
        }
        .employment-type {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 13px;
            font-weight: bold;
            margin-right: 8px;
        }
        .part-time {
            background-color: #dbeafe;
            color: #1e40af;
        }
        .full-time {
            background-color: #fce7f3;
            color: #9d174d;
        }
        .contractor {
            background-color: #e0e7ff;
            color: #3730a3;
        }
        .future-scope {
            background-color: #f3f4f6;
            border: 2px dashed #9ca3af;
            padding: 15px;
            border-radius: 6px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“‹ ã‚·ãƒ•ãƒˆé–¢é€£ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ å¤‰æ›´ è¨­è¨ˆæ›¸</h1>

        <div class="info">
            <strong>ğŸ“… ä½œæˆæ—¥:</strong> 2025-11-26<br>
            <strong>ğŸ“ æ¦‚è¦:</strong> ã‚·ãƒ•ãƒˆé–¢é€£ãƒ†ãƒ¼ãƒ–ãƒ«(ops.shifts, ops.shift_preferences)ã®æ§‹é€ å¤‰æ›´
            <ul style="margin: 10px 0 0 0;">
                <li><b>ops.shift_preferences:</b> 1æ—¥1ãƒ¬ã‚³ãƒ¼ãƒ‰å½¢å¼ã«å¤‰æ›´</li>
                <li><b>ops.shifts:</b> 24æ™‚é–“è¶…éè¡¨è¨˜å¯¾å¿œ + pattern_idã‚’NULLè¨±å¯ã«å¤‰æ›´</li>
            </ul>
        </div>

        <h2>1. èƒŒæ™¯ã¨ç›®çš„</h2>

        <h3>1.1 shift_preferencesãƒ†ãƒ¼ãƒ–ãƒ«ã®å•é¡Œç‚¹</h3>
        <p>ç¾åœ¨ã®<code>ops.shift_preferences</code>ãƒ†ãƒ¼ãƒ–ãƒ«ã¯ä»¥ä¸‹ã®æ§‹é€ ã«ãªã£ã¦ã„ã¾ã™ï¼š</p>

        <table>
            <tr>
                <th>ã‚«ãƒ©ãƒ å</th>
                <th>å‹</th>
                <th>èª¬æ˜</th>
                <th>å•é¡Œç‚¹</th>
            </tr>
            <tr>
                <td><code>year</code></td>
                <td>INT</td>
                <td>å¯¾è±¡å¹´</td>
                <td rowspan="2">å¹´æœˆã§ç®¡ç†ã™ã‚‹ãŸã‚ã€æ—¥ä»˜ã”ã¨ã®é–‹å§‹ãƒ»çµ‚äº†æ™‚åˆ»ã‚’æŒã¦ãªã„</td>
            </tr>
            <tr>
                <td><code>month</code></td>
                <td>INT</td>
                <td>å¯¾è±¡æœˆ</td>
            </tr>
            <tr>
                <td><code>preferred_days</code></td>
                <td>TEXT</td>
                <td>å¸Œæœ›æ—¥ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰</td>
                <td>è¤‡æ•°æ—¥ãŒã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§æ ¼ç´ã•ã‚Œã¦ãŠã‚Šã€å€‹åˆ¥ã®æ™‚åˆ»æƒ…å ±ã‚’æŒã¦ãªã„</td>
            </tr>
            <tr>
                <td><code>ng_days</code></td>
                <td>TEXT</td>
                <td>NGæ—¥ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰</td>
                <td>åŒä¸Š</td>
            </tr>
            <tr>
                <td><code>preferred_time_slots</code></td>
                <td>TEXT</td>
                <td>å¸Œæœ›æ™‚é–“å¸¯</td>
                <td>æ—¥ä»˜ã¨ç´ã¥ã„ã¦ã„ãªã„ãŸã‚ã€ã©ã®æ—¥ã«ã©ã®æ™‚é–“å¸¯ã‚’å¸Œæœ›ã—ã¦ã„ã‚‹ã‹ä¸æ˜</td>
            </tr>
        </table>

        <div class="warning">
            <strong>âš ï¸ å•é¡Œ:</strong> ç¾åœ¨ã®æ§‹é€ ã§ã¯ã€Œ12æœˆ5æ—¥ã¯10:00ã€œ18:00ã€12æœˆ7æ—¥ã¯14:00ã€œ22:00ã€ã¨ã„ã£ãŸæ—¥ã”ã¨ã®å¸Œæœ›æ™‚é–“ã‚’è¡¨ç¾ã§ããšã€ç”»é¢ä¸Šã§å¸Œæœ›ã‚·ãƒ•ãƒˆã‚’é©åˆ‡ã«è¡¨ç¤ºã§ããªã„çŠ¶æ…‹ã§ã™ã€‚
        </div>

        <h3>1.2 shiftsãƒ†ãƒ¼ãƒ–ãƒ«ã®å•é¡Œç‚¹</h3>
        <p>ç¾åœ¨ã®<code>ops.shifts</code>ãƒ†ãƒ¼ãƒ–ãƒ«ã«ã‚‚ä»¥ä¸‹ã®å•é¡ŒãŒã‚ã‚Šã¾ã™ï¼š</p>

        <table>
            <tr>
                <th>ã‚«ãƒ©ãƒ å</th>
                <th>å‹</th>
                <th>å•é¡Œç‚¹</th>
            </tr>
            <tr>
                <td><code>start_time</code></td>
                <td>TIME NOT NULL</td>
                <td rowspan="2">PostgreSQLã®TIMEå‹ã¯00:00ã€œ23:59ã®ã¿å¯¾å¿œã€‚<br>æ·±å¤œå–¶æ¥­ã®ã€Œ25:00ã€ã€Œ26:00ã€ç­‰ã®24æ™‚é–“è¶…éè¡¨è¨˜ã‚’æ ¼ç´ã§ããªã„</td>
            </tr>
            <tr>
                <td><code>end_time</code></td>
                <td>TIME NOT NULL</td>
            </tr>
            <tr>
                <td><code>pattern_id</code></td>
                <td>INT NOT NULL (FK)</td>
                <td>MVPã§ã¯ã‚·ãƒ•ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³å…¥åŠ›æ©Ÿèƒ½ã‚’ä½¿ç”¨ã—ãªã„ãŒã€NOT NULLåˆ¶ç´„ãŒã‚ã‚‹ãŸã‚å¿…ãšå€¤ãŒå¿…è¦</td>
            </tr>
        </table>

        <div class="warning">
            <strong>âš ï¸ å•é¡Œ:</strong> æ—¢å­˜ã®CSVãƒ‡ãƒ¼ã‚¿ã«ã¯ã€Œ26:00ã€ç­‰ã®æ™‚åˆ»ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ãŒã€TIMEå‹ã§ã¯æ ¼ç´ã§ãã¾ã›ã‚“ã€‚ã¾ãŸã€MVPã§ã‚·ãƒ•ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³æ©Ÿèƒ½ã‚’ä½¿ç”¨ã—ãªã„å ´åˆã€pattern_idã®NOT NULLåˆ¶ç´„ãŒéšœå®³ã¨ãªã‚Šã¾ã™ã€‚
        </div>

        <h3>1.3 è¨­è¨ˆæ–¹é‡</h3>

        <div class="success">
            <strong>âœ… æ–¹é‡:</strong>
            <ul>
                <li><b>ops.shift_preferences:</b> 1æ—¥1ãƒ¬ã‚³ãƒ¼ãƒ‰å½¢å¼ã«å¤‰æ›´ã€æ™‚åˆ»ã¯VARCHAR(5)ã§24æ™‚é–“è¶…éè¡¨è¨˜ã«å¯¾å¿œ</li>
                <li><b>ops.shifts:</b> start_time/end_timeã‚’VARCHAR(5)ã«å¤‰æ›´ã€pattern_idã‚’NULLè¨±å¯ã«å¤‰æ›´</li>
            </ul>
        </div>

        <h3>1.4 é›‡ç”¨å½¢æ…‹åˆ¥ã®å…¥åŠ›ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆshift_preferencesï¼‰</h3>

        <div class="info">
            <p><span class="employment-type part-time">ã‚¢ãƒ«ãƒã‚¤ãƒˆ (PART_TIME)</span></p>
            <ul>
                <li><strong>å…¥åŠ›å†…å®¹:</strong> å‹¤å‹™å¸Œæœ›æ—¥ + é–‹å§‹æ™‚åˆ» + çµ‚äº†æ™‚åˆ»</li>
                <li><strong>æ„å‘³:</strong> ã€Œã“ã®æ—¥ã®ã“ã®æ™‚é–“å¸¯ãªã‚‰åƒã‘ã¾ã™ã€</li>
                <li><strong>ä¾‹:</strong> 12æœˆ5æ—¥ 10:00ã€œ18:00ã€12æœˆ7æ—¥ 14:00ã€œ22:00</li>
            </ul>
        </div>

        <div class="info">
            <p><span class="employment-type full-time">æ­£ç¤¾å“¡ (FULL_TIME)</span> <span class="employment-type contractor">æ¥­å‹™å§”è¨— (CONTRACTOR)</span></p>
            <ul>
                <li><strong>å…¥åŠ›å†…å®¹:</strong> NGæ—¥ï¼ˆå‡ºå‹¤ã§ããªã„æ—¥ï¼‰ã®ã¿</li>
                <li><strong>æ„å‘³:</strong> ã€Œã“ã®æ—¥ã¯å‡ºå‹¤ã§ãã¾ã›ã‚“ã€ï¼ˆãã‚Œä»¥å¤–ã¯å‡ºå‹¤å¯èƒ½ï¼‰</li>
                <li><strong>ä¾‹:</strong> 12æœˆ10æ—¥ï¼ˆç§ç”¨ï¼‰ã€12æœˆ15æ—¥ï¼ˆé€šé™¢ï¼‰</li>
            </ul>
        </div>

        <h3>1.5 å¯¾è±¡ãƒ†ãƒ¼ãƒ–ãƒ«ã®æ¯”è¼ƒ</h3>

        <h4>ops.shifts ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆå‚è€ƒï¼šç›®æ¨™ã®æ§‹é€ ï¼‰</h4>
        <pre>
CREATE TABLE ops.shifts (
    shift_id SERIAL PRIMARY KEY,
    tenant_id INT NOT NULL,
    store_id INT NOT NULL,
    plan_id INT NOT NULL,
    staff_id INT NOT NULL,
    shift_date DATE NOT NULL,           -- æ—¥ä»˜
    pattern_id INT NOT NULL,
    start_time TIME NOT NULL,           -- é–‹å§‹æ™‚åˆ»
    end_time TIME NOT NULL,             -- çµ‚äº†æ™‚åˆ»
    break_minutes INT DEFAULT 0,
    ...
);
        </pre>

        <h4>ops.shift_preferences ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆç¾çŠ¶ï¼‰</h4>
        <pre>
CREATE TABLE ops.shift_preferences (
    preference_id SERIAL PRIMARY KEY,
    tenant_id INT NOT NULL,
    store_id INT NOT NULL,
    staff_id INT NOT NULL,
    staff_name VARCHAR(100),
    year INT NOT NULL,                  -- å¹´ï¼ˆ1ãƒ¶æœˆ1ãƒ¬ã‚³ãƒ¼ãƒ‰ï¼‰
    month INT NOT NULL,                 -- æœˆ
    preferred_days TEXT,                -- å¸Œæœ›æ—¥ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰
    ng_days TEXT,                       -- NGæ—¥ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰
    preferred_time_slots TEXT,          -- å¸Œæœ›æ™‚é–“å¸¯ï¼ˆæ—¥ä»˜ã¨ç´ã¥ã„ã¦ã„ãªã„ï¼‰
    max_hours_per_week DECIMAL(5,2),
    notes TEXT,
    submitted_at TIMESTAMP,
    status VARCHAR(20) DEFAULT 'PENDING',
    ...
);
        </pre>

        <h2>2. å¤‰æ›´å¾Œã®ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ</h2>

        <h3>2.1 æ–°ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ </h3>

        <div class="success">
            <strong>âœ… è¨­è¨ˆãƒã‚¤ãƒ³ãƒˆ:</strong>
            <ul>
                <li><b>1æ—¥1ãƒ¬ã‚³ãƒ¼ãƒ‰</b> - ã‚·ãƒ•ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«ã¨åŒã˜ç²’åº¦</li>
                <li><b>ã‚·ãƒ³ãƒ—ãƒ«ãªæ§‹é€ </b> - pattern_idã¯æŒãŸãªã„ï¼ˆUIã®æ¦‚å¿µã§ã‚ã‚Šã€DBã§ç®¡ç†ã—ãªã„ï¼‰</li>
                <li><b>ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„</b> - åŒä¸€ã‚¹ã‚¿ãƒƒãƒ•ãƒ»åŒä¸€æ—¥ä»˜ã§1ãƒ¬ã‚³ãƒ¼ãƒ‰ã®ã¿</li>
                <li><b>24æ™‚é–“è¶…éè¡¨è¨˜å¯¾å¿œ</b> - start_time/end_timeã¯VARCHAR(5)ã§ã€Œ25:00ã€ç­‰ã«å¯¾å¿œ</li>
            </ul>
        </div>

        <div class="warning">
            <strong>âš ï¸ æ™‚åˆ»å‹ã«ã¤ã„ã¦:</strong><br>
            PostgreSQLã®TIMEå‹ã¯00:00ã€œ23:59ã¾ã§ã—ã‹æ ¼ç´ã§ããªã„ãŸã‚ã€æ·±å¤œå–¶æ¥­ã§ä½¿ç”¨ã•ã‚Œã‚‹ã€Œ25:00ã€ã€Œ26:00ã€ã¨ã„ã£ãŸ24æ™‚é–“è¶…éè¡¨è¨˜ã«å¯¾å¿œã§ãã¾ã›ã‚“ã€‚<br>
            ãã®ãŸã‚ã€<code>start_time</code>ã¨<code>end_time</code>ã¯<strong>VARCHAR(5)</strong>å‹ã‚’ä½¿ç”¨ã—ã¾ã™ï¼ˆ05:00ã€œ28:00ã®ç¯„å›²ã‚’æƒ³å®šï¼‰ã€‚<br>
            <br>
            <strong>ops.shiftsãƒ†ãƒ¼ãƒ–ãƒ«ã«ã¤ã„ã¦:</strong> æœ¬è¨­è¨ˆã«ã¦ops.shiftsãƒ†ãƒ¼ãƒ–ãƒ«ã‚‚åŒæ§˜ã«VARCHAR(5)ã«å¤‰æ›´ã—ã¾ã™ï¼ˆã‚»ã‚¯ã‚·ãƒ§ãƒ³2.4å‚ç…§ï¼‰ã€‚
        </div>

        <pre>
CREATE TABLE ops.shift_preferences (
    preference_id SERIAL PRIMARY KEY,
    tenant_id INT NOT NULL,
    store_id INT NOT NULL,
    staff_id INT NOT NULL,
    preference_date DATE NOT NULL,      -- å¸Œæœ›/NGå¯¾è±¡æ—¥ï¼ˆå¹´æœˆæ—¥ï¼‰â˜…å¤‰æ›´
    is_ng BOOLEAN NOT NULL DEFAULT FALSE, -- TRUE: NGæ—¥ï¼ˆå‡ºå‹¤ä¸å¯ï¼‰ã€FALSE: å¸Œæœ›æ—¥ï¼ˆå‡ºå‹¤å¸Œæœ›ï¼‰â˜…è¿½åŠ 
    start_time VARCHAR(5),              -- å¸Œæœ›é–‹å§‹æ™‚åˆ» â˜…è¿½åŠ ï¼ˆä¾‹: "09:00", "25:00"ï¼‰ã‚¢ãƒ«ãƒã‚¤ãƒˆç”¨ã€NGæ—¥ã®å ´åˆã¯NULL
    end_time VARCHAR(5),                -- å¸Œæœ›çµ‚äº†æ™‚åˆ» â˜…è¿½åŠ ï¼ˆä¾‹: "18:00", "26:00"ï¼‰ã‚¢ãƒ«ãƒã‚¤ãƒˆç”¨ã€NGæ—¥ã®å ´åˆã¯NULL
    notes TEXT,                         -- æ—¥ä»˜ã”ã¨ã®ã‚³ãƒ¡ãƒ³ãƒˆ
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,

    FOREIGN KEY (tenant_id) REFERENCES core.tenants(tenant_id) ON DELETE CASCADE,
    FOREIGN KEY (store_id) REFERENCES core.stores(store_id) ON DELETE CASCADE,
    FOREIGN KEY (staff_id) REFERENCES hr.staff(staff_id) ON DELETE CASCADE,

    -- â˜…é‡è¦: åŒä¸€ã‚¹ã‚¿ãƒƒãƒ•ãƒ»åŒä¸€æ—¥ä»˜ã§1ãƒ¬ã‚³ãƒ¼ãƒ‰ã®ã¿è¨±å¯ï¼ˆé‡è¤‡ç™»éŒ²é˜²æ­¢ï¼‰
    CONSTRAINT unique_preference_per_staff_date UNIQUE (tenant_id, staff_id, preference_date)
);

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆ
CREATE INDEX idx_shift_preferences_tenant ON ops.shift_preferences(tenant_id);
CREATE INDEX idx_shift_preferences_store ON ops.shift_preferences(store_id);
CREATE INDEX idx_shift_preferences_staff ON ops.shift_preferences(staff_id);
CREATE INDEX idx_shift_preferences_date ON ops.shift_preferences(preference_date);
CREATE INDEX idx_shift_preferences_is_ng ON ops.shift_preferences(is_ng);

-- updated_atè‡ªå‹•æ›´æ–°ãƒˆãƒªã‚¬ãƒ¼
CREATE TRIGGER update_shift_preferences_updated_at
    BEFORE UPDATE ON ops.shift_preferences
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();
        </pre>

        <div class="success">
            <strong>âœ… ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„:</strong> <code>UNIQUE (tenant_id, staff_id, preference_date)</code><br>
            åŒã˜ã‚¹ã‚¿ãƒƒãƒ•ãŒåŒã˜æ—¥ä»˜ã«è¤‡æ•°ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ç™»éŒ²ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã€DBãƒ¬ãƒ™ãƒ«ã§ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚
        </div>

        <h3>2.2 ã‚«ãƒ©ãƒ å¤‰æ›´è©³ç´°</h3>

        <table>
            <tr>
                <th>å¤‰æ›´ç¨®åˆ¥</th>
                <th>ã‚«ãƒ©ãƒ å</th>
                <th>æ—§å®šç¾©</th>
                <th>æ–°å®šç¾©</th>
                <th>èª¬æ˜</th>
            </tr>
            <tr>
                <td><span class="badge badge-delete">å‰Šé™¤</span></td>
                <td><code>year</code></td>
                <td>INT NOT NULL</td>
                <td>-</td>
                <td>preference_dateã«çµ±åˆ</td>
            </tr>
            <tr>
                <td><span class="badge badge-delete">å‰Šé™¤</span></td>
                <td><code>month</code></td>
                <td>INT NOT NULL</td>
                <td>-</td>
                <td>preference_dateã«çµ±åˆ</td>
            </tr>
            <tr>
                <td><span class="badge badge-delete">å‰Šé™¤</span></td>
                <td><code>preferred_days</code></td>
                <td>TEXT</td>
                <td>-</td>
                <td>preference_date + is_ng=FALSE ã§è¡¨ç¾</td>
            </tr>
            <tr>
                <td><span class="badge badge-delete">å‰Šé™¤</span></td>
                <td><code>ng_days</code></td>
                <td>TEXT</td>
                <td>-</td>
                <td>preference_date + is_ng=TRUE ã§è¡¨ç¾</td>
            </tr>
            <tr>
                <td><span class="badge badge-delete">å‰Šé™¤</span></td>
                <td><code>preferred_time_slots</code></td>
                <td>TEXT</td>
                <td>-</td>
                <td>start_time, end_timeã«ç½®ãæ›ãˆ</td>
            </tr>
            <tr>
                <td><span class="badge badge-delete">å‰Šé™¤</span></td>
                <td><code>max_hours_per_week</code></td>
                <td>DECIMAL(5,2)</td>
                <td>-</td>
                <td>ã‚¹ã‚¿ãƒƒãƒ•ãƒã‚¹ã‚¿ãƒ¼å´ã§ç®¡ç†</td>
            </tr>
            <tr>
                <td><span class="badge badge-delete">å‰Šé™¤</span></td>
                <td><code>staff_name</code></td>
                <td>VARCHAR(100)</td>
                <td>-</td>
                <td>JOINã§å–å¾—ï¼ˆå†—é•·ãƒ‡ãƒ¼ã‚¿ã®å‰Šé™¤ï¼‰</td>
            </tr>
            <tr>
                <td><span class="badge badge-delete">å‰Šé™¤</span></td>
                <td><code>status</code></td>
                <td>VARCHAR(20)</td>
                <td>-</td>
                <td>MVPå¾Œã« shift_submissions ã§ç®¡ç†äºˆå®š</td>
            </tr>
            <tr>
                <td><span class="badge badge-delete">å‰Šé™¤</span></td>
                <td><code>submitted_at</code></td>
                <td>TIMESTAMP</td>
                <td>-</td>
                <td>MVPå¾Œã« shift_submissions ã§ç®¡ç†äºˆå®š</td>
            </tr>
            <tr>
                <td><span class="badge badge-add">è¿½åŠ </span></td>
                <td><code>preference_date</code></td>
                <td>-</td>
                <td>DATE NOT NULL</td>
                <td>å¸Œæœ›/NGã®å¯¾è±¡æ—¥ï¼ˆå¹´æœˆæ—¥ï¼‰</td>
            </tr>
            <tr>
                <td><span class="badge badge-add">è¿½åŠ </span></td>
                <td><code>is_ng</code></td>
                <td>-</td>
                <td>BOOLEAN DEFAULT FALSE</td>
                <td>NGæ—¥ãƒ•ãƒ©ã‚°ï¼ˆTRUE=å‡ºå‹¤ä¸å¯ã€FALSE=å‡ºå‹¤å¸Œæœ›ï¼‰</td>
            </tr>
            <tr>
                <td><span class="badge badge-add">è¿½åŠ </span></td>
                <td><code>start_time</code></td>
                <td>-</td>
                <td>VARCHAR(5)</td>
                <td>å¸Œæœ›é–‹å§‹æ™‚åˆ»ï¼ˆã‚¢ãƒ«ãƒã‚¤ãƒˆç”¨ï¼‰ä¾‹: "09:00", "25:00"</td>
            </tr>
            <tr>
                <td><span class="badge badge-add">è¿½åŠ </span></td>
                <td><code>end_time</code></td>
                <td>-</td>
                <td>VARCHAR(5)</td>
                <td>å¸Œæœ›çµ‚äº†æ™‚åˆ»ï¼ˆã‚¢ãƒ«ãƒã‚¤ãƒˆç”¨ï¼‰ä¾‹: "18:00", "26:00"</td>
            </tr>
        </table>

        <h3>2.3 é›‡ç”¨å½¢æ…‹åˆ¥ã®ãƒ‡ãƒ¼ã‚¿æ ¼ç´ãƒ‘ã‚¿ãƒ¼ãƒ³</h3>

        <h4>ã‚¢ãƒ«ãƒã‚¤ãƒˆã®ä¾‹ï¼ˆ12æœˆã«5æ—¥åˆ†ã®å¸Œæœ›ã‚’å‡ºã™å ´åˆï¼‰â†’ 5ãƒ¬ã‚³ãƒ¼ãƒ‰</h4>
        <table>
            <tr>
                <th>preference_id</th>
                <th>staff_id</th>
                <th>preference_date</th>
                <th>is_ng</th>
                <th>start_time</th>
                <th>end_time</th>
                <th>notes</th>
            </tr>
            <tr>
                <td>101</td>
                <td>5</td>
                <td>2025-12-01</td>
                <td>FALSE</td>
                <td>10:00</td>
                <td>18:00</td>
                <td></td>
            </tr>
            <tr>
                <td>102</td>
                <td>5</td>
                <td>2025-12-03</td>
                <td>FALSE</td>
                <td>10:00</td>
                <td>18:00</td>
                <td></td>
            </tr>
            <tr>
                <td>103</td>
                <td>5</td>
                <td>2025-12-05</td>
                <td>FALSE</td>
                <td>18:00</td>
                <td>26:00</td>
                <td>æ·±å¤œå‹¤å‹™å¸Œæœ›ï¼ˆç¿Œ2æ™‚ã¾ã§ï¼‰</td>
            </tr>
            <tr>
                <td>104</td>
                <td>5</td>
                <td>2025-12-07</td>
                <td>FALSE</td>
                <td>10:00</td>
                <td>18:00</td>
                <td></td>
            </tr>
            <tr>
                <td>105</td>
                <td>5</td>
                <td>2025-12-10</td>
                <td>FALSE</td>
                <td>10:00</td>
                <td>14:00</td>
                <td>åˆå‰ã®ã¿</td>
            </tr>
        </table>

        <h4>æ­£ç¤¾å“¡ã®ä¾‹ï¼ˆ12æœˆã«2æ—¥åˆ†ã®NGæ—¥ã‚’å‡ºã™å ´åˆï¼‰â†’ 2ãƒ¬ã‚³ãƒ¼ãƒ‰</h4>
        <table>
            <tr>
                <th>preference_id</th>
                <th>staff_id</th>
                <th>preference_date</th>
                <th>is_ng</th>
                <th>start_time</th>
                <th>end_time</th>
                <th>notes</th>
            </tr>
            <tr>
                <td>201</td>
                <td>3</td>
                <td>2025-12-10</td>
                <td>TRUE</td>
                <td>NULL</td>
                <td>NULL</td>
                <td>ç§ç”¨</td>
            </tr>
            <tr>
                <td>202</td>
                <td>3</td>
                <td>2025-12-15</td>
                <td>TRUE</td>
                <td>NULL</td>
                <td>NULL</td>
                <td>é€šé™¢</td>
            </tr>
        </table>

        <div class="info">
            <strong>ğŸ’¡ ãƒã‚¤ãƒ³ãƒˆ:</strong>
            <ul>
                <li><strong>ã‚¢ãƒ«ãƒã‚¤ãƒˆ:</strong> å‹¤å‹™å¸Œæœ›æ—¥ã‚’ç™»éŒ²ï¼ˆis_ng=FALSEï¼‰ã€æ™‚é–“å¸¯ã‚‚æŒ‡å®š</li>
                <li><strong>æ­£ç¤¾å“¡/æ¥­å‹™å§”è¨—:</strong> NGæ—¥ã®ã¿ã‚’ç™»éŒ²ï¼ˆis_ng=TRUEï¼‰ã€ãã‚Œä»¥å¤–ã®æ—¥ã¯å‡ºå‹¤å¯èƒ½ã¨ã¿ãªã™</li>
                <li><strong>pattern_idã¯ä¸è¦:</strong> UIã§ã‚·ãƒ•ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é¸æŠã—ã¦ã‚‚ã€å®Ÿéš›ã«ä¿å­˜ã™ã‚‹ã®ã¯start_time/end_time</li>
            </ul>
        </div>

        <div class="warning">
            <strong>âš ï¸ ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ï¼ˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ã§åˆ¶å¾¡ï¼‰:</strong>
            <table>
                <tr>
                    <th>é›‡ç”¨å½¢æ…‹</th>
                    <th>is_ng=FALSEï¼ˆå¸Œæœ›æ—¥ï¼‰</th>
                    <th>is_ng=TRUEï¼ˆNGæ—¥ï¼‰</th>
                </tr>
                <tr>
                    <td><span class="employment-type part-time">ã‚¢ãƒ«ãƒã‚¤ãƒˆ</span></td>
                    <td>âœ… ç™»éŒ²å¯èƒ½</td>
                    <td>âŒ ç™»éŒ²ä¸å¯</td>
                </tr>
                <tr>
                    <td><span class="employment-type full-time">æ­£ç¤¾å“¡</span></td>
                    <td>âŒ ç™»éŒ²ä¸å¯</td>
                    <td>âœ… ç™»éŒ²å¯èƒ½</td>
                </tr>
                <tr>
                    <td><span class="employment-type contractor">æ¥­å‹™å§”è¨—</span></td>
                    <td>âŒ ç™»éŒ²ä¸å¯</td>
                    <td>âœ… ç™»éŒ²å¯èƒ½</td>
                </tr>
            </table>
            <p style="margin-top: 10px; font-size: 13px;">
                â€» ã“ã®ãƒ«ãƒ¼ãƒ«ã¯DBåˆ¶ç´„ã§ã¯ãªãã€<strong>ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®UIåˆ¶å¾¡</strong>ã¨<strong>ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³</strong>ã§å®Ÿè£…ã™ã‚‹ã€‚<br>
                ï¼ˆemployment_typeã¯hr.staffãƒ†ãƒ¼ãƒ–ãƒ«ã«ã‚ã‚Šã€shift_preferencesã‹ã‚‰CHECKåˆ¶ç´„ã§ç›´æ¥å‚ç…§ã§ããªã„ãŸã‚ï¼‰
            </p>
        </div>

        <div class="future-scope">
            <strong>ğŸ“‹ å°†æ¥å¯¾å¿œï¼ˆMVPå¾Œï¼‰:</strong> ã‚·ãƒ•ãƒˆå¸Œæœ›æå‡ºç®¡ç†ãƒ†ãƒ¼ãƒ–ãƒ«<br>
            <p>ã€Œã‚·ãƒ•ãƒˆå¸Œæœ›ãŒ0ä»¶ã€ã®çŠ¶æ…‹ãŒã€Œæœªæå‡ºã€ãªã®ã‹ã€Œæå‡ºæ¸ˆã¿ï¼ˆå¸Œæœ›ãªã—ï¼‰ã€ãªã®ã‹åŒºåˆ¥ã™ã‚‹ãŸã‚ã€<code>shift_submissions</code>ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’è¿½åŠ äºˆå®šã€‚</p>
            <p>è©³ç´°: <a href="https://github.com/The-botch/shift-scheduler-ai/issues/132">Issue #132</a></p>
        </div>

        <h2>2.4 ops.shiftsãƒ†ãƒ¼ãƒ–ãƒ«ã®å¤‰æ›´</h2>

        <h3>2.4.1 å¤‰æ›´å¾Œã®ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ </h3>

        <div class="success">
            <strong>âœ… å¤‰æ›´ãƒã‚¤ãƒ³ãƒˆ:</strong>
            <ul>
                <li><b>start_time/end_time:</b> TIME â†’ VARCHAR(5)ã«å¤‰æ›´ï¼ˆ24æ™‚é–“è¶…éè¡¨è¨˜å¯¾å¿œï¼‰</li>
                <li><b>pattern_id:</b> NOT NULL â†’ NULLè¨±å¯ã«å¤‰æ›´ï¼ˆMVPã§ã¯ã‚·ãƒ•ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³å…¥åŠ›ãªã—ï¼‰</li>
            </ul>
        </div>

        <pre>
-- ops.shiftsï¼ˆã‚·ãƒ•ãƒˆå®Ÿç¸¾/è¨ˆç”»ï¼‰- CSVæŠ•å…¥ or AIç”Ÿæˆ
CREATE TABLE IF NOT EXISTS ops.shifts (
    shift_id SERIAL PRIMARY KEY,
    tenant_id INT NOT NULL,
    store_id INT NOT NULL,
    plan_id INT NOT NULL,
    staff_id INT NOT NULL,
    shift_date DATE NOT NULL,
    pattern_id INT,                     -- â˜…å¤‰æ›´: NOT NULL â†’ NULLè¨±å¯ï¼ˆMVPã§ã¯ã‚·ãƒ•ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³æœªä½¿ç”¨ï¼‰
    start_time VARCHAR(5) NOT NULL,     -- â˜…å¤‰æ›´: TIME â†’ VARCHAR(5)ï¼ˆä¾‹: "09:00", "25:00"ï¼‰
    end_time VARCHAR(5) NOT NULL,       -- â˜…å¤‰æ›´: TIME â†’ VARCHAR(5)ï¼ˆä¾‹: "18:00", "26:00"ï¼‰
    break_minutes INT NOT NULL DEFAULT 0,
    total_hours DECIMAL(5,2),
    labor_cost INT,
    assigned_skills JSONB,
    is_preferred BOOLEAN DEFAULT FALSE,
    is_modified BOOLEAN DEFAULT FALSE,
    notes TEXT,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,

    FOREIGN KEY (tenant_id) REFERENCES core.tenants(tenant_id) ON DELETE CASCADE,
    FOREIGN KEY (store_id) REFERENCES core.stores(store_id) ON DELETE CASCADE,
    FOREIGN KEY (plan_id) REFERENCES ops.shift_plans(plan_id) ON DELETE CASCADE,
    FOREIGN KEY (staff_id) REFERENCES hr.staff(staff_id) ON DELETE CASCADE,
    FOREIGN KEY (pattern_id) REFERENCES core.shift_patterns(pattern_id)  -- NULLè¨±å¯ã®FK
);
        </pre>

        <h3>2.4.2 ã‚«ãƒ©ãƒ å¤‰æ›´è©³ç´°</h3>

        <table>
            <tr>
                <th>å¤‰æ›´ç¨®åˆ¥</th>
                <th>ã‚«ãƒ©ãƒ å</th>
                <th>æ—§å®šç¾©</th>
                <th>æ–°å®šç¾©</th>
                <th>èª¬æ˜</th>
            </tr>
            <tr>
                <td><span class="badge badge-change">å¤‰æ›´</span></td>
                <td><code>pattern_id</code></td>
                <td>INT NOT NULL</td>
                <td>INT (NULLè¨±å¯)</td>
                <td>MVPã§ã¯ã‚·ãƒ•ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³å…¥åŠ›æ©Ÿèƒ½ã‚’ä½¿ç”¨ã—ãªã„ãŸã‚ã€NULLè¨±å¯ã«å¤‰æ›´ã€‚å°†æ¥çš„ã«æ©Ÿèƒ½è¿½åŠ ã™ã‚‹å ´åˆã«å‚™ãˆã¦ã‚«ãƒ©ãƒ è‡ªä½“ã¯æ®‹ã™</td>
            </tr>
            <tr>
                <td><span class="badge badge-change">å¤‰æ›´</span></td>
                <td><code>start_time</code></td>
                <td>TIME NOT NULL</td>
                <td>VARCHAR(5) NOT NULL</td>
                <td>24æ™‚é–“è¶…éè¡¨è¨˜ï¼ˆä¾‹: "25:00"ï¼‰ã«å¯¾å¿œã™ã‚‹ãŸã‚æ–‡å­—åˆ—å‹ã«å¤‰æ›´</td>
            </tr>
            <tr>
                <td><span class="badge badge-change">å¤‰æ›´</span></td>
                <td><code>end_time</code></td>
                <td>TIME NOT NULL</td>
                <td>VARCHAR(5) NOT NULL</td>
                <td>24æ™‚é–“è¶…éè¡¨è¨˜ï¼ˆä¾‹: "26:00"ï¼‰ã«å¯¾å¿œã™ã‚‹ãŸã‚æ–‡å­—åˆ—å‹ã«å¤‰æ›´</td>
            </tr>
        </table>

        <div class="info">
            <strong>ğŸ’¡ pattern_idã«ã¤ã„ã¦:</strong>
            <ul>
                <li>MVPã§ã¯<b>ã‚·ãƒ•ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³å…¥åŠ›æ©Ÿèƒ½ã‚’ä½¿ç”¨ã—ãªã„</b>ãŸã‚ã€NULLè¨±å¯ã«å¤‰æ›´</li>
                <li>å°†æ¥çš„ã«ã‚·ãƒ•ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³æ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹éš›ã«å‚™ãˆã€ã‚«ãƒ©ãƒ ãƒ»FKãƒ»ãƒã‚¹ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ«ã¯æ®‹ã™</li>
                <li>æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã§pattern_idãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ãã®ã¾ã¾ä¿æŒ</li>
            </ul>
        </div>

        <h2>3. å½±éŸ¿ç¯„å›²ã¨ä¿®æ­£å¯¾è±¡</h2>

        <h3>3.1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆDDLï¼‰ <span class="badge badge-db">DB</span></h3>

        <table>
            <tr>
                <th>ãƒ•ã‚¡ã‚¤ãƒ«</th>
                <th>ä¿®æ­£å†…å®¹</th>
            </tr>
            <tr>
                <td class="file-path">scripts/database/ddl/schema.sql</td>
                <td>
                    <ul>
                        <li>ops.shift_preferencesãƒ†ãƒ¼ãƒ–ãƒ«ã®å†å®šç¾©</li>
                        <li>ops.shiftsãƒ†ãƒ¼ãƒ–ãƒ«ã®å¤‰æ›´ï¼ˆstart_time/end_timeå‹å¤‰æ›´ã€pattern_id NULLè¨±å¯ï¼‰</li>
                    </ul>
                </td>
            </tr>
        </table>

        <h3>3.2 ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API <span class="badge badge-backend">Backend</span></h3>

        <table>
            <tr>
                <th>ãƒ•ã‚¡ã‚¤ãƒ«</th>
                <th>ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ</th>
                <th>ä¿®æ­£å†…å®¹</th>
            </tr>
            <tr>
                <td class="file-path">backend/src/routes/shifts.js</td>
                <td><code>GET /api/shifts/preferences</code></td>
                <td>
                    <ul>
                        <li>ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å¤‰æ›´: year, month â†’ date_from, date_to</li>
                        <li>ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ§‹é€ ã®å¤‰æ›´</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td class="file-path">backend/src/routes/shifts.js</td>
                <td><code>GET /api/shifts/preferences/:id</code></td>
                <td>ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ§‹é€ ã®å¤‰æ›´</td>
            </tr>
            <tr>
                <td class="file-path">backend/src/routes/shifts.js</td>
                <td><code>POST /api/shifts/preferences</code></td>
                <td>
                    <ul>
                        <li>ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£å¤‰æ›´</li>
                        <li>INSERTæ–‡ã®ä¿®æ­£</li>
                        <li>ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ä¿®æ­£</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td class="file-path">backend/src/routes/shifts.js</td>
                <td><code>PUT /api/shifts/preferences/:id</code></td>
                <td>
                    <ul>
                        <li>ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£å¤‰æ›´</li>
                        <li>UPDATEæ–‡ã®ä¿®æ­£</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td class="file-path">backend/src/routes/shifts.js</td>
                <td><code>DELETE /api/shifts/preferences/:id</code></td>
                <td>å¤‰æ›´ãªã—ï¼ˆpreference_idãƒ™ãƒ¼ã‚¹ã®ãŸã‚ï¼‰</td>
            </tr>
            <tr>
                <td class="file-path">backend/src/routes/vector-store.js</td>
                <td>Vector Storeæ§‹ç¯‰</td>
                <td>shift_preferencesã®ã‚¯ã‚¨ãƒªä¿®æ­£</td>
            </tr>
        </table>

        <h3>3.3 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ <span class="badge badge-frontend">Frontend</span></h3>

        <table>
            <tr>
                <th>ãƒ•ã‚¡ã‚¤ãƒ«</th>
                <th>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ/é–¢æ•°</th>
                <th>ä¿®æ­£å†…å®¹</th>
            </tr>
            <tr>
                <td class="file-path">frontend/src/infrastructure/repositories/ShiftRepository.js</td>
                <td><code>getPreferences()</code></td>
                <td>
                    <ul>
                        <li>ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å¤‰æ›´ï¼ˆyear, month â†’ dateFrom, dateToï¼‰</li>
                        <li>ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ å¯¾å¿œ</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td class="file-path">frontend/src/components/screens/shift/LineShiftInput.jsx</td>
                <td>ã‚·ãƒ•ãƒˆå¸Œæœ›å…¥åŠ›ç”»é¢</td>
                <td>
                    <ul>
                        <li>APIãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹å‡¦ç†ã®ä¿®æ­£</li>
                        <li><code>preferred_days</code>ã®ãƒ‘ãƒ¼ã‚¹å‡¦ç†ã‚’å‰Šé™¤</li>
                        <li>æ–°æ§‹é€ ï¼ˆ1æ—¥1ãƒ¬ã‚³ãƒ¼ãƒ‰ï¼‰ã¸ã®å¯¾å¿œ</li>
                        <li>ã‚¢ãƒ«ãƒã‚¤ãƒˆ: start_time, end_timeã®å…¥åŠ›UI</li>
                        <li>æ­£ç¤¾å“¡/æ¥­å‹™å§”è¨—: NGæ—¥é¸æŠUI</li>
                        <li>æ™‚åˆ»å…¥åŠ›UIã®å¤‰æ›´ï¼ˆ<code>&lt;input type="time"&gt;</code>ã§ã¯24æ™‚è¶…éä¸å¯ã®ãŸã‚ã€ã‚«ã‚¹ã‚¿ãƒ ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ã«å¤‰æ›´ï¼‰</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td class="file-path">frontend/src/components/shared/ShiftTimeline.jsx</td>
                <td>ã‚·ãƒ•ãƒˆã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³</td>
                <td>
                    <ul>
                        <li><code>timeToMinutes()</code>é–¢æ•°ã®ä¿®æ­£ï¼ˆ"25:00"å½¢å¼ã‚’ç›´æ¥ãƒ‘ãƒ¼ã‚¹å¯èƒ½ã«ï¼‰</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td class="file-path">frontend/src/components/mobile/ShiftPatternSelector.jsx</td>
                <td>ã‚·ãƒ•ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³é¸æŠ</td>
                <td>
                    <ul>
                        <li>æ™‚åˆ»å…¥åŠ›UIã®å¤‰æ›´ï¼ˆ24æ™‚è¶…éå¯¾å¿œï¼‰</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td class="file-path">frontend/src/components/screens/shift/Monitoring.jsx</td>
                <td>ã‚·ãƒ•ãƒˆå¸Œæœ›ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ç”»é¢</td>
                <td>
                    <ul>
                        <li>å¸Œæœ›ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿å‡¦ç†ä¿®æ­£</li>
                        <li><code>preferred_days</code>, <code>ng_days</code>ã®ãƒ‘ãƒ¼ã‚¹å‰Šé™¤</li>
                        <li>æ–°æ§‹é€ ã§ã®è¡¨ç¤ºå‡¦ç†</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td class="file-path">frontend/src/components/shared/MultiStoreShiftTable.jsx</td>
                <td>è¤‡æ•°åº—èˆ—ã‚·ãƒ•ãƒˆè¡¨</td>
                <td>
                    <ul>
                        <li><code>isPreferredDay()</code>, <code>isNgDay()</code>é–¢æ•°ã®ä¿®æ­£</li>
                        <li>is_ngãƒ•ãƒ©ã‚°ãƒ™ãƒ¼ã‚¹ã®åˆ¤å®šã«å¤‰æ›´</li>
                        <li>å¸Œæœ›è¡¨ç¤ºã®è‰²åˆ†ã‘ãƒ­ã‚¸ãƒƒã‚¯ä¿®æ­£</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td class="file-path">frontend/src/utils/shiftInputCollector.js</td>
                <td>ã‚·ãƒ•ãƒˆå…¥åŠ›ãƒ‡ãƒ¼ã‚¿åé›†</td>
                <td>
                    <ul>
                        <li>APIå‘¼ã³å‡ºã—ã®ä¿®æ­£</li>
                        <li>ãƒ‡ãƒ¼ã‚¿å¤‰æ›å‡¦ç†ã®ä¿®æ­£</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td class="file-path">frontend/src/components/screens/shift/FirstPlanEditor.jsx</td>
                <td>ç¬¬ä¸€æ¡ˆã‚¨ãƒ‡ã‚£ã‚¿</td>
                <td>å¸Œæœ›ã‚·ãƒ•ãƒˆå‚ç…§å‡¦ç†ã®ä¿®æ­£</td>
            </tr>
            <tr>
                <td class="file-path">frontend/src/components/screens/shift/SecondPlanEditor.jsx</td>
                <td>ç¬¬äºŒæ¡ˆã‚¨ãƒ‡ã‚£ã‚¿</td>
                <td>å¸Œæœ›ã‚·ãƒ•ãƒˆå‚ç…§å‡¦ç†ã®ä¿®æ­£</td>
            </tr>
        </table>

        <h3>3.4 ãã®ä»–é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«</h3>

        <table>
            <tr>
                <th>ãƒ•ã‚¡ã‚¤ãƒ«</th>
                <th>ä¿®æ­£å†…å®¹</th>
            </tr>
            <tr>
                <td class="file-path">docs/DATABASE_SCHEMA.md</td>
                <td>ã‚¹ã‚­ãƒ¼ãƒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°</td>
            </tr>
            <tr>
                <td class="file-path">scripts/debug/export_transaction_data.mjs</td>
                <td>ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå‡¦ç†ã®ä¿®æ­£</td>
            </tr>
            <tr>
                <td class="file-path">scripts/debug/verify_columns.mjs</td>
                <td>ã‚«ãƒ©ãƒ æ¤œè¨¼å‡¦ç†ã®ä¿®æ­£</td>
            </tr>
            <tr>
                <td class="file-path">fixtures/demo_data/transactions/shift_preferences_*.csv</td>
                <td>ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ã®å†ç”Ÿæˆ</td>
            </tr>
        </table>

        <h2>4. ãƒ‡ãƒ¼ã‚¿ç§»è¡Œè¨ˆç”»</h2>

        <h3>4.1 ç§»è¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆ</h3>

        <div class="warning">
            <strong>âš ï¸ é‡è¦:</strong> æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’æ–°æ§‹é€ ã«ç§»è¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä»¥ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
        </div>

        <pre>
-- 1. æ–°ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆï¼ˆä¸€æ™‚ãƒ†ãƒ¼ãƒ–ãƒ«ã¨ã—ã¦ï¼‰
CREATE TABLE ops.shift_preferences_new (
    preference_id SERIAL PRIMARY KEY,
    tenant_id INT NOT NULL,
    store_id INT NOT NULL,
    staff_id INT NOT NULL,
    preference_date DATE NOT NULL,
    is_ng BOOLEAN NOT NULL DEFAULT FALSE,
    start_time VARCHAR(5),              -- TIMEå‹ã§ã¯ãªãVARCHAR(5)ã§24æ™‚é–“è¶…éè¡¨è¨˜ã«å¯¾å¿œ
    end_time VARCHAR(5),                -- ä¾‹: "25:00", "26:00"
    notes TEXT,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,

    FOREIGN KEY (tenant_id) REFERENCES core.tenants(tenant_id) ON DELETE CASCADE,
    FOREIGN KEY (store_id) REFERENCES core.stores(store_id) ON DELETE CASCADE,
    FOREIGN KEY (staff_id) REFERENCES hr.staff(staff_id) ON DELETE CASCADE
);

-- 2. æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’ç§»è¡Œï¼ˆpreferred_daysã‚’å±•é–‹ï¼‰â†’ is_ng = FALSE
INSERT INTO ops.shift_preferences_new
(tenant_id, store_id, staff_id, preference_date, is_ng, notes, created_at, updated_at)
SELECT
    p.tenant_id,
    p.store_id,
    p.staff_id,
    TRIM(date_val)::DATE AS preference_date,
    FALSE AS is_ng,
    p.notes,
    p.created_at,
    p.updated_at
FROM ops.shift_preferences p,
LATERAL unnest(string_to_array(p.preferred_days, ',')) AS date_val
WHERE p.preferred_days IS NOT NULL AND p.preferred_days != '';

-- 3. ng_daysã‚‚ç§»è¡Œ â†’ is_ng = TRUE
INSERT INTO ops.shift_preferences_new
(tenant_id, store_id, staff_id, preference_date, is_ng, notes, created_at, updated_at)
SELECT
    p.tenant_id,
    p.store_id,
    p.staff_id,
    TRIM(date_val)::DATE AS preference_date,
    TRUE AS is_ng,
    p.notes,
    p.created_at,
    p.updated_at
FROM ops.shift_preferences p,
LATERAL unnest(string_to_array(p.ng_days, ',')) AS date_val
WHERE p.ng_days IS NOT NULL AND p.ng_days != '';

-- 4. æ—§ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ãƒªãƒãƒ¼ãƒ ï¼ˆãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼‰
ALTER TABLE ops.shift_preferences RENAME TO shift_preferences_old;

-- 5. æ–°ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ãƒªãƒãƒ¼ãƒ 
ALTER TABLE ops.shift_preferences_new RENAME TO shift_preferences;

-- 6. ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„è¿½åŠ 
ALTER TABLE ops.shift_preferences
ADD CONSTRAINT unique_preference_per_staff_date UNIQUE (tenant_id, staff_id, preference_date);

-- 7. ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆ
CREATE INDEX idx_shift_preferences_tenant ON ops.shift_preferences(tenant_id);
CREATE INDEX idx_shift_preferences_store ON ops.shift_preferences(store_id);
CREATE INDEX idx_shift_preferences_staff ON ops.shift_preferences(staff_id);
CREATE INDEX idx_shift_preferences_date ON ops.shift_preferences(preference_date);
CREATE INDEX idx_shift_preferences_is_ng ON ops.shift_preferences(is_ng);

-- 8. ãƒˆãƒªã‚¬ãƒ¼ä½œæˆ
CREATE TRIGGER update_shift_preferences_updated_at
    BEFORE UPDATE ON ops.shift_preferences
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();
        </pre>

        <h3>4.2 ops.shiftsãƒ†ãƒ¼ãƒ–ãƒ«ã®å¤‰æ›´</h3>

        <div class="info">
            <strong>ğŸ’¡ ãƒã‚¤ãƒ³ãƒˆ:</strong> shiftsãƒ†ãƒ¼ãƒ–ãƒ«ã¯ã‚«ãƒ©ãƒ ã®å‹å¤‰æ›´ã®ã¿ãªã®ã§ã€ãƒ†ãƒ¼ãƒ–ãƒ«å†ä½œæˆã§ã¯ãªãALTER TABLEã§å¯¾å¿œå¯èƒ½ã§ã™ã€‚
        </div>

        <pre>
-- ops.shiftsãƒ†ãƒ¼ãƒ–ãƒ«ã®å¤‰æ›´

-- 1. pattern_idã®NOT NULLåˆ¶ç´„ã‚’å‰Šé™¤
ALTER TABLE ops.shifts ALTER COLUMN pattern_id DROP NOT NULL;

-- 2. start_timeã®å‹ã‚’VARCHAR(5)ã«å¤‰æ›´
ALTER TABLE ops.shifts
    ALTER COLUMN start_time TYPE VARCHAR(5)
    USING to_char(start_time, 'HH24:MI');

-- 3. end_timeã®å‹ã‚’VARCHAR(5)ã«å¤‰æ›´
ALTER TABLE ops.shifts
    ALTER COLUMN end_time TYPE VARCHAR(5)
    USING to_char(end_time, 'HH24:MI');

-- æ³¨æ„: æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã«TIMEå‹ã§æ ¼ç´ã§ããŸå€¤ï¼ˆ00:00ã€œ23:59ï¼‰ã¯
-- 'HH24:MI'å½¢å¼ã®æ–‡å­—åˆ—ï¼ˆä¾‹: "09:00", "18:00"ï¼‰ã«å¤‰æ›ã•ã‚Œã¾ã™ã€‚
-- 24æ™‚é–“è¶…éè¡¨è¨˜ã¯æ–°è¦ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰é©ç”¨ã•ã‚Œã¾ã™ã€‚
        </pre>

        <h2>5. APIä»•æ§˜å¤‰æ›´</h2>

        <h3>5.1 GET /api/shifts/preferences</h3>

        <h4>å¤‰æ›´å‰ï¼ˆç¾è¡Œï¼‰</h4>
        <pre>
// ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
GET /api/shifts/preferences?tenant_id=1&staff_id=5&year=2025&month=12

// ãƒ¬ã‚¹ãƒãƒ³ã‚¹
{
  "success": true,
  "data": [
    {
      "preference_id": 1,
      "tenant_id": 1,
      "store_id": 1,
      "staff_id": 5,
      "year": 2025,
      "month": 12,
      "preferred_days": "2025-12-01,2025-12-03,2025-12-05",
      "ng_days": "2025-12-10,2025-12-11",
      "preferred_time_slots": "morning,evening",
      "max_hours_per_week": 20,
      "notes": null,
      "status": "PENDING"
    }
  ]
}
        </pre>

        <h4>å¤‰æ›´å¾Œï¼ˆæ–°ä»•æ§˜ï¼‰</h4>
        <pre>
// ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
GET /api/shifts/preferences?tenant_id=1&staff_id=5&date_from=2025-12-01&date_to=2025-12-31

// ãƒ¬ã‚¹ãƒãƒ³ã‚¹
{
  "success": true,
  "data": [
    {
      "preference_id": 1,
      "tenant_id": 1,
      "store_id": 1,
      "staff_id": 5,
      "staff_name": "ç”°ä¸­å¤ªéƒ",      // JOINã§å–å¾—
      "employment_type": "PART_TIME", // JOINã§å–å¾—
      "preference_date": "2025-12-01",
      "is_ng": false,
      "start_time": "10:00",
      "end_time": "18:00",
      "notes": null
    },
    {
      "preference_id": 2,
      "tenant_id": 1,
      "store_id": 1,
      "staff_id": 5,
      "staff_name": "ç”°ä¸­å¤ªéƒ",
      "employment_type": "PART_TIME",
      "preference_date": "2025-12-03",
      "is_ng": false,
      "start_time": "14:00",
      "end_time": "22:00",
      "notes": null
    },
    {
      "preference_id": 10,
      "tenant_id": 1,
      "store_id": 1,
      "staff_id": 3,
      "staff_name": "éˆ´æœ¨ä¸€éƒ",
      "employment_type": "FULL_TIME",
      "preference_date": "2025-12-10",
      "is_ng": true,
      "start_time": null,
      "end_time": null,
      "notes": "ç§ç”¨ã®ãŸã‚"
    }
  ],
  "count": 3
}
        </pre>

        <h3>5.2 POST /api/shifts/preferences</h3>

        <h4>å¤‰æ›´å‰ï¼ˆç¾è¡Œï¼‰</h4>
        <pre>
// ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
POST /api/shifts/preferences
{
  "tenant_id": 1,
  "store_id": 1,
  "staff_id": 5,
  "year": 2025,
  "month": 12,
  "preferred_days": "2025-12-01,2025-12-03,2025-12-05",
  "ng_days": "2025-12-10",
  "preferred_time_slots": "morning",
  "max_hours_per_week": 20,
  "notes": "",
  "status": "PENDING"
}
        </pre>

        <h4>å¤‰æ›´å¾Œï¼ˆæ–°ä»•æ§˜ï¼‰- 1ä»¶ç™»éŒ²</h4>
        <pre>
// ã‚¢ãƒ«ãƒã‚¤ãƒˆã®å ´åˆï¼ˆå‹¤å‹™å¸Œæœ›ï¼‰
POST /api/shifts/preferences
{
  "tenant_id": 1,
  "store_id": 1,
  "staff_id": 5,
  "preference_date": "2025-12-01",
  "is_ng": false,
  "start_time": "10:00",
  "end_time": "18:00",
  "notes": ""
}

// æ­£ç¤¾å“¡/æ¥­å‹™å§”è¨—ã®å ´åˆï¼ˆNGæ—¥ï¼‰
POST /api/shifts/preferences
{
  "tenant_id": 1,
  "store_id": 1,
  "staff_id": 3,
  "preference_date": "2025-12-10",
  "is_ng": true,
  "notes": "ç§ç”¨ã®ãŸã‚"
}
        </pre>

        <h4>å¤‰æ›´å¾Œï¼ˆæ–°ä»•æ§˜ï¼‰- ä¸€æ‹¬ç™»éŒ²</h4>
        <pre>
// ä¸€æ‹¬ç™»éŒ²ç”¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
POST /api/shifts/preferences/bulk
{
  "tenant_id": 1,
  "store_id": 1,
  "staff_id": 5,
  "preferences": [
    {
      "preference_date": "2025-12-01",
      "is_ng": false,
      "start_time": "10:00",
      "end_time": "18:00"
    },
    {
      "preference_date": "2025-12-03",
      "is_ng": false,
      "start_time": "14:00",
      "end_time": "22:00"
    }
  ]
}
        </pre>

        <h2>6. å®Ÿè£…é †åº</h2>

        <table>
            <tr>
                <th>é †åº</th>
                <th>å¯¾è±¡</th>
                <th>ä½œæ¥­å†…å®¹</th>
                <th>ä¾å­˜</th>
            </tr>
            <tr>
                <td>1</td>
                <td><span class="badge badge-db">DB</span></td>
                <td>schema.sql ã®ä¿®æ­£</td>
                <td>-</td>
            </tr>
            <tr>
                <td>2</td>
                <td><span class="badge badge-db">DB</span></td>
                <td>ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆãƒ»å®Ÿè¡Œ</td>
                <td>1</td>
            </tr>
            <tr>
                <td>3</td>
                <td><span class="badge badge-backend">Backend</span></td>
                <td>shifts.js ã® preference API ä¿®æ­£</td>
                <td>2</td>
            </tr>
            <tr>
                <td>4</td>
                <td><span class="badge badge-backend">Backend</span></td>
                <td>ä¸€æ‹¬ç™»éŒ²API (POST /bulk) ã®è¿½åŠ </td>
                <td>3</td>
            </tr>
            <tr>
                <td>5</td>
                <td><span class="badge badge-frontend">Frontend</span></td>
                <td>ShiftRepository.js ã®ä¿®æ­£</td>
                <td>3</td>
            </tr>
            <tr>
                <td>6</td>
                <td><span class="badge badge-frontend">Frontend</span></td>
                <td>LineShiftInput.jsx ã®ä¿®æ­£</td>
                <td>5</td>
            </tr>
            <tr>
                <td>7</td>
                <td><span class="badge badge-frontend">Frontend</span></td>
                <td>MultiStoreShiftTable.jsx ã®ä¿®æ­£</td>
                <td>5</td>
            </tr>
            <tr>
                <td>8</td>
                <td><span class="badge badge-frontend">Frontend</span></td>
                <td>Monitoring.jsx ã®ä¿®æ­£</td>
                <td>5</td>
            </tr>
            <tr>
                <td>9</td>
                <td><span class="badge badge-frontend">Frontend</span></td>
                <td>ãã®ä»–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä¿®æ­£</td>
                <td>5</td>
            </tr>
            <tr>
                <td>10</td>
                <td>-</td>
                <td>çµ±åˆãƒ†ã‚¹ãƒˆ</td>
                <td>1-9</td>
            </tr>
        </table>

        <h2>7. ãƒ†ã‚¹ãƒˆè¨ˆç”»</h2>

        <h3>7.1 å˜ä½“ãƒ†ã‚¹ãƒˆ</h3>
        <ul>
            <li>API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ¤œè¨¼</li>
            <li>ãƒ‡ãƒ¼ã‚¿ç§»è¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å‹•ä½œç¢ºèª</li>
            <li>ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®è¡¨ç¤ºç¢ºèª</li>
        </ul>

        <h3>7.2 çµ±åˆãƒ†ã‚¹ãƒˆ</h3>
        <ul>
            <li>å¸Œæœ›ã‚·ãƒ•ãƒˆå…¥åŠ› â†’ DBä¿å­˜ â†’ ä¸€è¦§è¡¨ç¤º ã® E2E ãƒ•ãƒ­ãƒ¼</li>
            <li><span class="employment-type part-time">ã‚¢ãƒ«ãƒã‚¤ãƒˆ</span>: å‹¤å‹™å¸Œæœ›æ—¥ + æ™‚é–“å¸¯ã®å…¥åŠ›ãƒ»è¡¨ç¤º</li>
            <li><span class="employment-type full-time">æ­£ç¤¾å“¡</span>: NGæ—¥ã®å…¥åŠ›ãƒ»è¡¨ç¤º</li>
            <li><span class="employment-type contractor">æ¥­å‹™å§”è¨—</span>: NGæ—¥ã®å…¥åŠ›ãƒ»è¡¨ç¤º</li>
            <li>ã‚·ãƒ•ãƒˆè¡¨ã§ã®å¸Œæœ›æ—¥/NGæ—¥è¡¨ç¤ºï¼ˆè‰²åˆ†ã‘ï¼‰ç¢ºèª</li>
        </ul>

        <h3>7.3 ç§»è¡Œãƒ†ã‚¹ãƒˆ</h3>
        <ul>
            <li>æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã®æ­£å¸¸ç§»è¡Œç¢ºèª</li>
            <li>ç§»è¡Œå¾Œã®ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯</li>
            <li>preferred_days â†’ is_ng=FALSE ã¸ã®å¤‰æ›ç¢ºèª</li>
            <li>ng_days â†’ is_ng=TRUE ã¸ã®å¤‰æ›ç¢ºèª</li>
        </ul>

        <h2>8. ãƒªã‚¹ã‚¯ã¨å¯¾ç­–</h2>

        <div class="danger">
            <strong>ğŸš¨ ãƒªã‚¹ã‚¯1: æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã®æ¶ˆå¤±</strong><br>
            <strong>å¯¾ç­–:</strong> ç§»è¡Œå‰ã«æ—§ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼ˆshift_preferences_oldï¼‰ã¨ã—ã¦ä¿æŒ
        </div>

        <div class="warning">
            <strong>âš ï¸ ãƒªã‚¹ã‚¯2: APIäº’æ›æ€§ã®ç ´å£Š</strong><br>
            <strong>å¯¾ç­–:</strong> ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰/ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’åŒæ™‚ã«ãƒ‡ãƒ—ãƒ­ã‚¤
        </div>

        <div class="warning">
            <strong>âš ï¸ ãƒªã‚¹ã‚¯3: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä½ä¸‹</strong><br>
            <strong>å¯¾ç­–:</strong>
            <ul>
                <li>é©åˆ‡ãªã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨­è¨ˆï¼ˆpreference_date, staff_id, is_ngï¼‰</li>
                <li>ä¸€æ‹¬ç™»éŒ²APIã®æä¾›</li>
            </ul>
        </div>

        <h2>9. å‚è€ƒæƒ…å ±</h2>

        <h3>9.1 é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</h3>
        <ul>
            <li><code>docs/DATABASE_SCHEMA.md</code> - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</li>
            <li><code>backend/API.md</code> - APIä»•æ§˜æ›¸</li>
        </ul>

        <h3>9.2 é–¢é€£Issue</h3>
        <ul>
            <li><a href="https://github.com/The-botch/shift-scheduler-ai/issues/132">Issue #132</a> - ã‚·ãƒ•ãƒˆå¸Œæœ›æå‡ºç®¡ç†ãƒ†ãƒ¼ãƒ–ãƒ«(shift_submissions)ã®è¿½åŠ ï¼ˆMVPå¾Œï¼‰</li>
        </ul>

        <h3>9.3 å°†æ¥ã‚¿ã‚¹ã‚¯ï¼ˆæœ¬è¨­è¨ˆã®ç¯„å›²å¤–ï¼‰</h3>
        <div class="future-scope">
            <ul>
                <li><strong>æ™‚åˆ»ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ :</strong> start_time/end_timeã®å½¢å¼ãƒã‚§ãƒƒã‚¯ï¼ˆHH:MMå½¢å¼ã€05:00ã€œ28:00ã®ç¯„å›²ï¼‰ã‚’ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ»ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ä¸¡æ–¹ã«è¿½åŠ </li>
                <li><strong>ã‚·ãƒ•ãƒˆå¸Œæœ›æå‡ºç®¡ç†:</strong> shift_submissionsãƒ†ãƒ¼ãƒ–ãƒ«ã®è¿½åŠ ï¼ˆIssue #132ï¼‰</li>
            </ul>
        </div>

        <hr>
        <p style="text-align: center; color: #718096; font-size: 14px;">
            ä½œæˆ: 2025-11-26 | AIã‚·ãƒ•ãƒˆã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ãƒ¼é–‹ç™ºãƒãƒ¼ãƒ 
        </p>
    </div>
</body>
</html>
